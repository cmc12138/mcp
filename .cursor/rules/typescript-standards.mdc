---
globs: *.ts,*.tsx
description: TypeScriptç¼–ç æ ‡å‡†å’Œæœ€ä½³å®è·?---

# TypeScriptç¼–ç æ ‡å‡†

## ç±»å‹å®šä¹‰è§„èŒƒ

### ä¸¥æ ¼ç±»å‹æ£€æŸ?
- å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹ï¼ˆå·²åœ¨tsconfig.jsonä¸­é…ç½®ï¼‰
- ä½¿ç”¨ `noImplicitAny: true` é¿å…éšå¼anyç±»å‹
- ä½¿ç”¨ `strictNullChecks: true` è¿›è¡Œä¸¥æ ¼çš„nullæ£€æŸ?- ä½¿ç”¨ `noUncheckedIndexedAccess: true` é¿å…æœªæ£€æŸ¥çš„ç´¢å¼•è®¿é—®

### æ¥å£å’Œç±»å‹å®šä¹?
```typescript
// ä¼˜å…ˆä½¿ç”¨interfaceè€Œétypeï¼ˆé™¤ééœ€è¦è”åˆç±»å‹ï¼‰
interface ComponentInfo {
  name: string;
  type: ComponentType;
  props: ComponentProps;
  state?: ComponentState;
}

// ä½¿ç”¨è”åˆç±»å‹æ—¶ä½¿ç”¨type
type ComponentType = 'functional' | 'class' | 'arrow';
```

### é”™è¯¯å¤„ç†ç±»å‹

- ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»å‹å®šä¹‰åœ¨ [src/types/errors.ts](mdc:src/types/errors.ts)
- æ‰€æœ‰åˆ†æå™¨æ–¹æ³•éƒ½åº”è¿”å›Promiseå¹¶å¤„ç†å¼‚æ­¥é”™è¯?- ä½¿ç”¨Resultæ¨¡å¼å¤„ç†å¯èƒ½å¤±è´¥çš„æ“ä½?
```typescript
// é”™è¯¯å¤„ç†ç¤ºä¾‹
try {
  const result = await analyzer.analyzeComponents(ast, filePath);
  return result;
} catch (error) {
  throw createAnalysisError('Component analysis failed', error);
}
```

## ä»£ç ç»„ç»‡è§„èŒƒ

### å¯¼å…¥é¡ºåº

1. Node.jså†…ç½®æ¨¡å—
2. ç¬¬ä¸‰æ–¹åº“
3. é¡¹ç›®å†…éƒ¨æ¨¡å—ï¼ˆæŒ‰è·¯å¾„æ·±åº¦æ’åºï¼?4. ç±»å‹å¯¼å…¥ï¼ˆä½¿ç”?`import type`ï¼?
```typescript
import * as t from '@babel/types';
import { parse } from '@babel/parser';

import type { ComponentInfo, ComponentType } from '../types/index';
import { ComponentAnalyzer } from './ComponentAnalyzer';
```

### å‡½æ•°å’Œç±»å®šä¹‰

- ä½¿ç”¨JSDocæ³¨é‡Šæè¿°æ‰€æœ‰å…¬å…±æ–¹æ³?- å¼‚æ­¥å‡½æ•°å¿…é¡»ä½¿ç”¨async/await
- ç±»æ–¹æ³•æŒ‰åŠŸèƒ½åˆ†ç»„ï¼ˆæ„é€ å‡½æ•°ã€å…¬å…±æ–¹æ³•ã€ç§æœ‰æ–¹æ³•ï¼‰

### å‘½åçº¦å®š

- ç±»åä½¿ç”¨PascalCaseï¼š`ComponentAnalyzer`
- æ–¹æ³•åä½¿ç”¨camelCaseï¼š`analyzeComponents`
- å¸¸é‡ä½¿ç”¨UPPER_SNAKE_CASEï¼š`MAX_RECURSION_DEPTH`
- ç§æœ‰æ–¹æ³•ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€ï¼š`_isReactComponent`

## æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

### å¼‚æ­¥æ“ä½œ

- ä½¿ç”¨ `Promise.all()` å¹¶è¡Œå¤„ç†ç‹¬ç«‹çš„å¼‚æ­¥æ“ä½?- é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨awaitï¼Œä¼˜å…ˆä½¿ç”¨å¹¶è¡Œå¤„ç?- ä½¿ç”¨é€‚å½“çš„è¶…æ—¶æœºåˆ¶é˜²æ­¢æ— é™ç­‰å¾?
### å†…å­˜ç®¡ç†

- åŠæ—¶æ¸…ç†å¤§å‹ASTå¯¹è±¡å¼•ç”¨
- ä½¿ç”¨WeakMapå­˜å‚¨ä¸´æ—¶æ•°æ®
- é¿å…åœ¨åˆ†æå™¨ä¸­å­˜å‚¨å¤§é‡çŠ¶æ€?
## é”™è¯¯å¤„ç†è§„èŒƒ

### é”™è¯¯åˆ†ç±»

- ä½¿ç”¨ [src/types/errors.ts](mdc:src/types/errors.ts) ä¸­å®šä¹‰çš„é”™è¯¯ç±»å‹
- åŒºåˆ†å¯æ¢å¤é”™è¯¯å’Œè‡´å‘½é”™è¯¯
- æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯æ¶ˆæ¯å’Œä¸Šä¸‹æ–‡ä¿¡æ¯

### é”™è¯¯æ¢å¤

- å®ç°é‡è¯•æœºåˆ¶ç”¨äºç½‘ç»œç›¸å…³é”™è¯¯
- ä½¿ç”¨é™çº§ç­–ç•¥å¤„ç†éƒ¨åˆ†å¤±è´¥çš„æƒ…å†?- è®°å½•é”™è¯¯ä½†ä¸ä¸­æ–­æ•´ä¸ªåˆ†ææµç¨‹

